spring.application.name=casaglass-backend

# ============================================================
# 🔌 CONEXIÓN A BASE DE DATOS LOCAL (MariaDB/MySQL)
# ============================================================
spring.datasource.url=jdbc:mysql://localhost:3306/Proyecto1?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8&serverTimezone=America/Bogota
spring.datasource.username=root
spring.datasource.password=admin123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================================
# ⚙️ CONFIGURACIÓN JPA / HIBERNATE
# ============================================================

# Actualiza o crea las tablas automáticamente sin borrar datos
spring.jpa.hibernate.ddl-auto=update

# Muestra las consultas SQL en consola (útil para debug)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Desactiva Open Session in View (mejor práctica)
spring.jpa.open-in-view=false

# Dialecto (usa MariaDBDialect que es más moderno y compatible)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# ============================================================
# 🔒 CONFIGURACIÓN DE LOCKS PESIMISTAS PARA DESARROLLO
# ============================================================
# Timeout para locks pesimistas (5 segundos para desarrollo)
spring.jpa.properties.hibernate.jdbc.lock_timeout=5000
# Timeout para consultas con locks
spring.jpa.properties.hibernate.query.timeout=5000

# ============================================================
# 🧠 HIKARI CONNECTION POOL (optimización y diagnóstico)
# ============================================================
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.initialization-fail-timeout=0

# ============================================================
# 🌎 ZONA HORARIA Y FORMATO DE FECHAS
# ============================================================
spring.jackson.time-zone=America/Bogota
spring.jpa.properties.hibernate.jdbc.time_zone=America/Bogota

# ============================================================
# 🩺 ACTUATOR (para health/info en desarrollo)
# ============================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
